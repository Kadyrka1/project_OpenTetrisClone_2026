#include <Wire.h>
#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x27, 20, 4);   // If blank, try 0x3F

unsigned long lastUpdate = 0;
int counter = 0;
bool inMenu = false;   // change this to test menu/game state


// ----------- FUNCTION -----------
void updateDisplay(int latestScore, int topScore, bool inMenuState) {

  lcd.clear();

  if (inMenuState) {
    lcd.setCursor(0,0);
    lcd.print("=== MAIN MENU ===");

    lcd.setCursor(0,2);
    lcd.print("Press Start");
  }
  else {
    lcd.setCursor(0,0);
    lcd.print("Top score: ");
    lcd.print(topScore);

    lcd.setCursor(0,1);
    lcd.print("Last score: ");
    lcd.print(latestScore);

    lcd.setCursor(0,3);
    lcd.print("Game Running...");
  }
}
// --------------------------------


void setup() {
  Serial.begin(115200);

  Wire.begin();
  lcd.init();
  lcd.backlight();

  updateDisplay(0, 0, true);  // Start in menu
}

void loop() {

  if (millis() - lastUpdate >= 1000) {
    lastUpdate = millis();
    counter++;

    int latestScore = counter;
    int topScore = counter * 10;

    updateDisplay(latestScore, topScore, inMenu);
  }
}
